# sites with special rules
server {
	listen				80;
	listen				443 ssl;
	server_name			cdn.guanaitong.dev img.guanaitong.dev static.guanaitong.dev;
	ssl_session_timeout	5m;
	ssl_certificate		/etc/ssl/certs/guanaitong.crt;
	ssl_certificate_key	/etc/ssl/private/guanaitong.key;
	index				index.htm index.html;
	access_log			off;
	add_header			Access-Control-Allow-Origin "*";
	root				/data1/www/wuxing/archive/images;
	location /s/ {
		alias /data1/www/s/;
	}
	location  /s2/ {
		alias /data1/www/s2/;
	}
}

server {
	listen				80;
	listen				443 ssl;
	server_name			site.guanaitong.dev;
	ssl_session_timeout	5m;
	ssl_certificate		/etc/ssl/certs/guanaitong.crt;
	ssl_certificate_key	/etc/ssl/private/guanaitong.key;
	index				index.php;
	set $root /data1/www/enterprise-apps/site2/code/app;
	location /hr/ {
		set $root /data1/www/enterprise-apps/groupcorp/src/app/hr;
	}
	location /transfer/ {
		set $root /data1/www/enterprise-apps/groupcorp/src/app/transfer;
	}
	root				$root;
	include				include/common.conf;
}

server {
	listen				80;
	listen				443 ssl;
	server_name			api.guanaitong.dev;
	ssl_session_timeout	5m;
	ssl_certificate		/etc/ssl/certs/guanaitong.crt;
	ssl_certificate_key	/etc/ssl/private/guanaitong.key;
	index				index.php;
	set $root /data1/www/api/code/app;
	location /v3/ {
		set $root /data1/www/api/code/v3;
		rewrite ^(.*) /index.php;
	}
	location /v4/ {
		set $root /data1/www/api/code/v4;
		rewrite ^(.*) /index.php;
	}
	if ($uri ~* "^\/agent\/") {
		set $root /data1/www/api/code;
	}
	root				$root;
	include				include/common.conf;
}

server {
	listen				80;
	server_name			develop.sysom.wuxingdev.cn;
	index				index.php;
	root				/data1/www/sysom/src;
	include				include/common.conf;
}

