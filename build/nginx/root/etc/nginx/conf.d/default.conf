# support 256 subdomain for each domain
map_hash_bucket_size	256;

map $http_host $gat_domain_root {
	hostnames;
	default				/data1/www;
	include				include/gat_domain_root.conf;
}

map $http_host $app_domain_root {
	hostnames;
	default				/data1/www;
	include				include/app_domain_root.conf;
}

map $http_host $ccard_domain_root {
	hostnames;
	default				/data1/www;
	include				include/ccard_domain_root.conf;
}

map $http_host $backend_domain_root {
	hostnames;
	default				/data1/www;
	include				include/backend_domain_root.conf;
}

map $http_host $cs400_domain_root {
	hostnames;
	default				/data1/www;
	include				include/cs400_domain_root.conf;
}

map $host $service_domain_root {
	hostnames;
	default				/data1/www;
	include				include/service_domain_root.conf;
}

map $host $my_domain_root {
	hostnames;
	default				/data1/www;
	include				include/my_domain_root.conf;
}

server {
	listen				80 default_server;
	listen				443 ssl;
	server_name			.guanaitong.dev;
	ssl_session_timeout	5m;
	ssl_certificate		/etc/ssl/certs/guanaitong.crt;
	ssl_certificate_key	/etc/ssl/private/guanaitong.key;
	index				index.php;
	root				$gat_domain_root;
	include				include/common.conf;
}

server {
	listen				80;
	listen				443 ssl;
	server_name			.a.guanaitong.dev;
	ssl_session_timeout	5m;
	ssl_certificate		/etc/ssl/certs/guanaitong.crt;
	ssl_certificate_key	/etc/ssl/private/guanaitong.key;
	index				index.php;
	root				$app_domain_root;
	include				include/common.conf;
}

server {
	listen				80;
	listen				443 ssl;
	server_name			.gift.guanaitong.dev;
	ssl_session_timeout	5m;
	ssl_certificate		/etc/ssl/certs/guanaitong.crt;
	ssl_certificate_key	/etc/ssl/private/guanaitong.key;
	index				index.php;
	root				$ccard_domain_root;
	include				include/common.conf;
}

server {
	listen				80;
	listen				443 ssl;
	server_name			.ciicgat.dev;
	ssl_session_timeout	5m;
	ssl_certificate		/etc/ssl/certs/guanaitong.crt;
	ssl_certificate_key	/etc/ssl/private/guanaitong.key;
	index				index.php;
	root				$backend_domain_root;
	include				include/common.conf;
}

server {
	listen				80;
	server_name			.4008885818.dev;
	index				index.php;
	root				$cs400_domain_root;
	include				include/common.conf;
}

server {
	listen				80;
	server_name			.services.dev.ofc;
	index				index.php;
	root				$service_domain_root;
	include				include/common.conf;
}

server {
	listen				80;
	listen				443 ssl;
	server_name			.cs.dev;
	ssl_session_timeout	5m;
	ssl_certificate		/etc/ssl/certs/guanaitong.crt;
	ssl_certificate_key	/etc/ssl/private/guanaitong.key;
	index				index.php;
	root				$my_domain_root;
	location / {  
    	try_files $uri $uri/ /index.php?$query_string;  
	}
	include				include/common.conf;
}
